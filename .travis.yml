language: node_js
node_js: 
  - "stable"
env:
  global:
    - CC_TEST_REPORTER_ID=506d4ee84b11bfa9898dfb7f3732667af17db4dcd27337f117fb4d05188dcded

before_script: 
  - cd api && npm install && npm install codeclimate-test-reporter istanbul -g
script:  
  - npm test && istanbul cover node_modules/mocha/bin/_mocha -- -R spec
after_script:
  - codeclimate-test-reporter < ./coverage/lcov.info
cache:
directories:
    - "api/node_modules"

